!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.reductio=t()}}(function(){return function t(e,n,u){function r(o,c){if(!n[o]){if(!e[o]){var a="function"==typeof require&&require;if(!c&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var s=n[o]={exports:{}};e[o][0].call(s.exports,function(t){var n=e[o][1][t];return r(n?n:t)},s,s.exports,t,e,n,u)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<u.length;o++)r(u[o]);return r}({1:[function(t,e){var n={add:function(t,e){return function(t,n){return e&&e(t,n),t.avg=t.count>0?t.sum/t.count:0,t}},remove:function(t,e){return function(t,n){return e&&e(t,n),t.avg=t.count>0?t.sum/t.count:0,t}},initial:function(t){return function(e){return e=t(e),e.avg=0,e}}};e.exports=n},{}],2:[function(t,e){var n={add:function(t){return t.count++,t},remove:function(t){return t.count--,t},initial:function(t){return void 0===t&&(t={}),t.count=0,t}};e.exports=n},{}],3:[function(t,e){var n={add:function(t,e){var n,u;return function(r,i){return e&&e(r,i),n=r.bisect(r.values,t(i),0,r.values.length),u=r.values[n],u&&u[0]===t(i)&&0!==u[1]||r.exceptionCount++,r}},remove:function(t,e){var n,u;return function(r,i){return e&&e(r,i),n=r.bisect(r.values,t(i),0,r.values.length),u=r.values[n],u&&u[0]===t(i)&&1===u[1]&&r.exceptionCount--,r}},initial:function(t){return function(e){return e=t(e),e.exceptionCount=0,e}}};e.exports=n},{}],4:[function(t,e){var n={add:function(t,e,n){var u,r;return function(i,o){return n&&n(i,o),u=i.bisect(i.values,t(o),0,i.values.length),r=i.values[u],r&&r[0]===t(o)&&0!==r[1]||(i.exceptionSum=i.exceptionSum+e(o)),i}},remove:function(t,e,n){var u,r;return function(i,o){return n&&n(i,o),u=i.bisect(i.values,t(o),0,i.values.length),r=i.values[u],r&&r[0]===t(o)&&1===r[1]&&(i.exceptionSum=i.exceptionSum-e(o)),i}},initial:function(t){return function(e){return e=t(e),e.exceptionSum=0,e}}};e.exports=n},{}],5:[function(t,e){var n={add:function(t,e){var n,u=crossfilter.bisect.by(function(t){return t}).left,r=crossfilter.bisect.by(function(t){return t.x}).right;return function(i,o){return e&&e(i,o),n=i.histogram[r(i.histogram,t(o),0,i.histogram.length)-1],n.y++,n.splice(u(n,t(o),0,n.length),0,t(o)),i}},remove:function(t,e){var n,u=crossfilter.bisect.by(function(t){return t}).left,r=crossfilter.bisect.by(function(t){return t.x}).right;return function(i,o){return e&&e(i,o),n=i.histogram[r(i.histogram,t(o),0,i.histogram.length)-1],n.y--,n.splice(u(n,t(o),0,n.length),1),i}},initial:function(t,e){return function(n){n=e(n),n.histogram=[];for(var u=[],r=1;r<t.length;r++)u=[],u.x=t[r-1],u.dx=t[r]-t[r-1],u.y=0,n.histogram.push(u);return n}}};e.exports=n},{}],6:[function(t,e){var n={add:function(t){var e;return function(n,u){return t&&t(n,u),e=Math.floor(n.valueList.length/2),n.median=n.valueList.length%2?n.valueList[e]:(n.valueList[e-1]+n.valueList[e])/2,n}},remove:function(t){var e;return function(n,u){return t&&t(n,u),e=Math.floor(n.valueList.length/2),0===n.valueList.length?(n.median=void 0,n):(n.median=1===n.valueList.length||n.valueList.length%2?n.valueList[e]:(n.valueList[e-1]+n.valueList[e])/2,n)}},initial:function(t){return function(e){return e=t(e),e.median=void 0,e}}};e.exports=n},{}],7:[function(t,e){function n(){function t(t){return e(),t.reduce(d,m,g),t}function e(){r&&(d=reductio_count.add,m=reductio_count.remove,g=reductio_count.initial),i&&(d=reductio_sum.add(i,d),m=reductio_sum.remove(i,m),g=reductio_sum.initial(g)),u&&(!r|!i?console.error("You must set .count(true) and define a .sum(accessor) to use .avg(true)."):(d=reductio_avg.add(i,d),m=reductio_avg.remove(i,m),g=reductio_avg.initial(g))),c&&(o?(d=reductio_exception_count.add(o,d),m=reductio_exception_count.remove(o,m),g=reductio_exception_count.initial(g)):console.error("You must define an .exception(accessor) to use .exceptionCount(true).")),a&&(o?(d=reductio_exception_sum.add(o,a,d),m=reductio_exception_sum.remove(o,a,m),g=reductio_exception_sum.initial(g)):console.error("You must define an .exception(accessor) to use .exceptionSum(accessor).")),(s||l)&&(d=reductio_value_list.add(s,d),m=reductio_value_list.remove(s,m),g=reductio_value_list.initial(g)),l&&(d=reductio_median.add(d),m=reductio_median.remove(m),g=reductio_median.initial(g)),o&&(d=reductio_value_count.add(o,d),m=reductio_value_count.remove(o,m),g=reductio_value_count.initial(g)),f&&v&&(d=reductio_histogram.add(f,d),m=reductio_histogram.remove(f,m),g=reductio_histogram.initial(v,g))}var n,u,r,i,o,c,a,s,l,f,v,d,m,g;return d=function(t){return t},d=function(t){return t},g=function(){return{}},t.order=function(e){return arguments.length?(n=e,t):n},t.count=function(e){return arguments.length?(r=e,t):r},t.sum=function(e){return arguments.length?(i=e,t):i},t.avg=function(e){return arguments.length?("function"==typeof e?(i&&console.warn("SUM aggregation is being overwritten by AVG aggregation"),i=e,u=!0,r=!0):u=e,t):u},t.exception=function(e){return arguments.length?(o=e,t):o},t.valueList=function(e){return arguments.length?(s=e,t):s},t.median=function(e){return arguments.length?(s&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),s=e,l=e,t):l},t.exceptionCount=function(e){return arguments.length?("function"==typeof e?(i&&console.warn("EXCEPTION accessor is being overwritten by exception count aggregation"),o=e,c=!0):c=e,t):c},t.exceptionSum=function(e){return arguments.length?(a=e,t):a},t.histogramValue=function(e){return arguments.length?(f=e,t):f},t.histogramBins=function(e){return arguments.length?(v=e,t):v},t}reductio_count=t("./count.js"),reductio_sum=t("./sum.js"),reductio_avg=t("./avg.js"),reductio_median=t("./median.js"),reductio_value_count=t("./value-count.js"),reductio_value_list=t("./value-list.js"),reductio_exception_count=t("./exception-count.js"),reductio_exception_sum=t("./exception-sum.js"),reductio_histogram=t("./histogram.js"),e.exports=n},{"./avg.js":1,"./count.js":2,"./exception-count.js":3,"./exception-sum.js":4,"./histogram.js":5,"./median.js":6,"./sum.js":8,"./value-count.js":9,"./value-list.js":10}],8:[function(t,e){var n={add:function(t,e){return function(n,u){return e&&e(n,u),n.sum=n.sum+t(u),n}},remove:function(t,e){return function(n,u){return e&&e(n,u),n.sum=n.sum-t(u),n}},initial:function(t){return function(e){return e=t(e),e.sum=0,e}}};e.exports=n},{}],9:[function(t,e){var n={add:function(t,e){var n,u;return function(r,i){return e&&e(r,i),n=r.bisect(r.values,t(i),0,r.values.length),u=r.values[n],u&&u[0]===t(i)?u[1]++:r.values.splice(n,0,[t(i),1]),r}},remove:function(t,e){var n;return function(u,r){return e&&e(u,r),n=u.bisect(u.values,t(r),0,u.values.length),u.values[n][1]--,u}},initial:function(t){return function(e){return e=t(e),e.values=[],e.bisect=crossfilter.bisect.by(function(t){return t[0]}).left,e}}};e.exports=n},{}],10:[function(t,e){var n={add:function(t,e){var n,u=crossfilter.bisect.by(function(t){return t}).left;return function(r,i){return e&&e(r,i),n=u(r.valueList,t(i),0,r.valueList.length),r.valueList.splice(n,0,t(i)),r}},remove:function(t,e){var n,u=crossfilter.bisect.by(function(t){return t}).left;return function(r,i){return e&&e(r,i),n=u(r.valueList,t(i),0,r.valueList.length),r.valueList.splice(n,1),r}},initial:function(t){return function(e){return e=t(e),e.valueList=[],e}}};e.exports=n},{}]},{},[7])(7)});