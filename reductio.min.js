!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.reductio=e()}}(function(){return function e(n,t,u){function i(o,c){if(!t[o]){if(!n[o]){var a="function"==typeof require&&require;if(!c&&a)return a(o,!0);if(r)return r(o,!0);throw new Error("Cannot find module '"+o+"'")}var s=t[o]={exports:{}};n[o][0].call(s.exports,function(e){var t=n[o][1][e];return i(t?t:e)},s,s.exports,e,n,t,u)}return t[o].exports}for(var r="function"==typeof require&&require,o=0;o<u.length;o++)i(u[o]);return i}({1:[function(e,n){var t={add:function(e,n){return function(e,t){return n&&n(e,t),e.avg=e.count>0?e.sum/e.count:0,e}},remove:function(e,n){return function(e,t){return n&&n(e,t),e.avg=e.count>0?e.sum/e.count:0,e}},initial:function(e){return function(n){return n=e(n),n.avg=0,n}}};n.exports=t},{}],2:[function(e,n){var t={add:function(e){return e.count++,e},remove:function(e){return e.count--,e},initial:function(e){return void 0===e&&(e={}),e.count=0,e}};n.exports=t},{}],3:[function(e,n){var t={add:function(e,n){var t,u;return function(i,r){return n&&n(i,r),t=i.bisect(i.values,e(r),0,i.values.length),u=i.values[t],u&&u[0]===e(r)&&0!==u[1]||i.exceptionCount++,i}},remove:function(e,n){var t,u;return function(i,r){return n&&n(i,r),t=i.bisect(i.values,e(r),0,i.values.length),u=i.values[t],u&&u[0]===e(r)&&1===u[1]&&i.exceptionCount--,i}},initial:function(e){return function(n){return n=e(n),n.exceptionCount=0,n}}};n.exports=t},{}],4:[function(e,n){var t={add:function(e,n,t){var u,i;return function(r,o){return t&&t(r,o),u=r.bisect(r.values,e(o),0,r.values.length),i=r.values[u],i&&i[0]===e(o)&&0!==i[1]||(r.exceptionSum=r.exceptionSum+n(o)),r}},remove:function(e,n,t){var u,i;return function(r,o){return t&&t(r,o),u=r.bisect(r.values,e(o),0,r.values.length),i=r.values[u],i&&i[0]===e(o)&&1===i[1]&&(r.exceptionSum=r.exceptionSum-n(o)),r}},initial:function(e){return function(n){return n=e(n),n.exceptionSum=0,n}}};n.exports=t},{}],5:[function(e,n){var t={add:function(e){var n;return function(t,u){return e&&e(t,u),n=Math.floor(t.valueList.length/2),t.median=t.valueList.length%2?t.valueList[n]:(t.valueList[n-1]+t.valueList[n])/2,t}},remove:function(e){var n;return function(t,u){return e&&e(t,u),n=Math.floor(t.valueList.length/2),0===t.valueList.length?(t.median=void 0,t):(t.median=1===t.valueList.length||t.valueList.length%2?t.valueList[n]:(t.valueList[n-1]+t.valueList[n])/2,t)}},initial:function(e){return function(n){return n=e(n),n.median=void 0,n}}};n.exports=t},{}],6:[function(e,n){function t(){function e(e){return n(),e.reduce(f,v,d),e}function n(){i&&(f=reductio_count.add,v=reductio_count.remove,d=reductio_count.initial),r&&(f=reductio_sum.add(r,f),v=reductio_sum.remove(r,v),d=reductio_sum.initial(d)),u&&(!i|!r?console.error("You must set .count(true) and define a .sum(accessor) to use .avg(true)."):(f=reductio_avg.add(r,f),v=reductio_avg.remove(r,v),d=reductio_avg.initial(d))),c&&(o?(f=reductio_exception_count.add(o,f),v=reductio_exception_count.remove(o,v),d=reductio_exception_count.initial(d)):console.error("You must define an .exception(accessor) to use .exceptionCount(true).")),a&&(o?(f=reductio_exception_sum.add(o,a,f),v=reductio_exception_sum.remove(o,a,v),d=reductio_exception_sum.initial(d)):console.error("You must define an .exception(accessor) to use .exceptionSum(accessor).")),(s||l)&&(f=reductio_value_list.add(s,f),v=reductio_value_list.remove(s,v),d=reductio_value_list.initial(d)),l&&(f=reductio_median.add(f),v=reductio_median.remove(v),d=reductio_median.initial(d)),o&&(f=reductio_value_count.add(o,f),v=reductio_value_count.remove(o,v),d=reductio_value_count.initial(d))}var t,u,i,r,o,c,a,s,l,f,v,d;return u=i=r=unique_accessor=countUniques=!1,f=function(e){return e},f=function(e){return e},d=function(){return{}},e.order=function(n){return arguments.length?(t=n,e):t},e.count=function(n){return arguments.length?(i=n,e):i},e.sum=function(n){return arguments.length?(r=n,e):r},e.avg=function(n){return arguments.length?("function"==typeof n?(r&&console.warn("SUM aggregation is being overwritten by AVG aggregation"),r=n,u=!0,i=!0):u=n,e):u},e.exception=function(n){return arguments.length?(o=n,e):o},e.valueList=function(n){return arguments.length?(s=n,e):s},e.median=function(n){return arguments.length?(s&&console.warn("VALUELIST accessor is being overwritten by median aggregation"),s=n,l=n,e):l},e.exceptionCount=function(n){return arguments.length?("function"==typeof n?(r&&console.warn("EXCEPTION accessor is being overwritten by exception count aggregation"),o=n,c=!0):c=n,e):c},e.exceptionSum=function(n){return arguments.length?(a=n,e):a},e}reductio_count=e("./count.js"),reductio_sum=e("./sum.js"),reductio_avg=e("./avg.js"),reductio_median=e("./median.js"),reductio_value_count=e("./value-count.js"),reductio_value_list=e("./value-list.js"),reductio_exception_count=e("./exception-count.js"),reductio_exception_sum=e("./exception-sum.js"),n.exports=t},{"./avg.js":1,"./count.js":2,"./exception-count.js":3,"./exception-sum.js":4,"./median.js":5,"./sum.js":7,"./value-count.js":8,"./value-list.js":9}],7:[function(e,n){var t={add:function(e,n){return function(t,u){return n&&n(t,u),t.sum=t.sum+e(u),t}},remove:function(e,n){return function(t,u){return n&&n(t,u),t.sum=t.sum-e(u),t}},initial:function(e){return function(n){return n=e(n),n.sum=0,n}}};n.exports=t},{}],8:[function(e,n){var t={add:function(e,n){var t,u;return function(i,r){return n&&n(i,r),t=i.bisect(i.values,e(r),0,i.values.length),u=i.values[t],u&&u[0]===e(r)?u[1]++:i.values.splice(t,0,[e(r),1]),i}},remove:function(e,n){var t;return function(u,i){return n&&n(u,i),t=u.bisect(u.values,e(i),0,u.values.length),u.values[t][1]--,u}},initial:function(e){return function(n){return n=e(n),n.values=[],n.bisect=crossfilter.bisect.by(function(e){return e[0]}).left,n}}};n.exports=t},{}],9:[function(e,n){var t={add:function(e,n){var t;return function(u,i){return n&&n(u,i),t=u.bisectList(u.valueList,e(i),0,u.valueList.length),u.valueList.splice(t,0,e(i)),u}},remove:function(e,n){var t;return function(u,i){return n&&n(u,i),t=u.bisectList(u.valueList,e(i),0,u.valueList.length),u.valueList.splice(t,1),u}},initial:function(e){return function(n){return n=e(n),n.valueList=[],n.bisectList=crossfilter.bisect.by(function(e){return e}).left,n}}};n.exports=t},{}]},{},[6])(6)});