!function(n){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r;"undefined"!=typeof window?r=window:"undefined"!=typeof global?r=global:"undefined"!=typeof self&&(r=self),r.reductio=n()}}(function(){return function n(r,t,e){function u(i,f){if(!t[i]){if(!r[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(o)return o(i,!0);throw new Error("Cannot find module '"+i+"'")}var a=t[i]={exports:{}};r[i][0].call(a.exports,function(n){var t=r[i][1][n];return u(t?t:n)},a,a.exports,n,r,t,e)}return t[i].exports}for(var o="function"==typeof require&&require,i=0;i<e.length;i++)u(e[i]);return u}({1:[function(n,r,t){!function(n){function r(n){return n}function t(n,r){for(var t=0,e=r.length,u=new Array(e);e>t;++t)u[t]=n[r[t]];return u}function e(n){function r(r,t,e,u){for(;u>e;){var o=e+u>>>1;n(r[o])<t?e=o+1:u=o}return e}function t(r,t,e,u){for(;u>e;){var o=e+u>>>1;t<n(r[o])?u=o:e=o+1}return e}return t.right=t,t.left=r,t}function u(n){function r(n,r,t){for(var u=t-r,o=(u>>>1)+1;--o>0;)e(n,o,u,r);return n}function t(n,r,t){for(var u,o=t-r;--o>0;)u=n[r],n[r]=n[r+o],n[r+o]=u,e(n,1,o,r);return n}function e(r,t,e,u){for(var o,i=r[--u+t],f=n(i);(o=t<<1)<=e&&(e>o&&n(r[u+o])>n(r[u+o+1])&&o++,!(f<=n(r[u+o])));)r[u+t]=r[u+o],t=o;r[u+t]=i}return r.sort=t,r}function o(n){function r(r,e,u,o){var i,f,c,a,l=new Array(o=Math.min(u-e,o));for(f=0;o>f;++f)l[f]=r[e++];if(t(l,0,o),u>e){i=n(l[0]);do(c=n(a=r[e])>i)&&(l[0]=a,i=n(t(l,0,o)[0]));while(++e<u)}return l}var t=u(n);return r}function i(n){function r(r,t,e){for(var u=t+1;e>u;++u){for(var o=u,i=r[u],f=n(i);o>t&&n(r[o-1])>f;--o)r[o]=r[o-1];r[o]=i}return r}return r}function f(n){function r(n,r,u){return(M>u-r?e:t)(n,r,u)}function t(t,e,u){var o,i=(u-e)/6|0,f=e+i,c=u-1-i,a=e+u-1>>1,l=a-i,s=a+i,v=t[f],d=n(v),h=t[l],p=n(h),g=t[a],m=n(g),y=t[s],x=n(y),b=t[c],w=n(b);d>p&&(o=v,v=h,h=o,o=d,d=p,p=o),x>w&&(o=y,y=b,b=o,o=x,x=w,w=o),d>m&&(o=v,v=g,g=o,o=d,d=m,m=o),p>m&&(o=h,h=g,g=o,o=p,p=m,m=o),d>x&&(o=v,v=y,y=o,o=d,d=x,x=o),m>x&&(o=g,g=y,y=o,o=m,m=x,x=o),p>w&&(o=h,h=b,b=o,o=p,p=w,w=o),p>m&&(o=h,h=g,g=o,o=p,p=m,m=o),x>w&&(o=y,y=b,b=o,o=x,x=w,w=o);var _=h,A=p,k=y,E=x;t[f]=v,t[l]=t[e],t[a]=g,t[s]=t[u-1],t[c]=b;var O=e+1,j=u-2,q=E>=A&&A>=E;if(q)for(var M=O;j>=M;++M){var U=t[M],z=n(U);if(A>z)M!==O&&(t[M]=t[O],t[O]=U),++O;else if(z>A)for(;;){var C=n(t[j]);{if(!(C>A)){if(A>C){t[M]=t[O],t[O++]=t[j],t[j--]=U;break}t[M]=t[j],t[j--]=U;break}j--}}}else for(var M=O;j>=M;M++){var U=t[M],z=n(U);if(A>z)M!==O&&(t[M]=t[O],t[O]=U),++O;else if(z>E)for(;;){var C=n(t[j]);{if(!(C>E)){A>C?(t[M]=t[O],t[O++]=t[j],t[j--]=U):(t[M]=t[j],t[j--]=U);break}if(j--,M>j)break}}}if(t[e]=t[O-1],t[O-1]=_,t[u-1]=t[j+1],t[j+1]=k,r(t,e,O-1),r(t,j+2,u),q)return t;if(f>O&&j>c){for(var N,C;(N=n(t[O]))<=A&&N>=A;)++O;for(;(C=n(t[j]))<=E&&C>=E;)--j;for(var M=O;j>=M;M++){var U=t[M],z=n(U);if(A>=z&&z>=A)M!==O&&(t[M]=t[O],t[O]=U),O++;else if(E>=z&&z>=E)for(;;){var C=n(t[j]);{if(!(E>=C&&C>=E)){A>C?(t[M]=t[O],t[O++]=t[j],t[j--]=U):(t[M]=t[j],t[j--]=U);break}if(j--,M>j)break}}}}return r(t,O,j+1)}var e=i(n);return r}function c(n){for(var r=new Array(n),t=-1;++t<n;)r[t]=0;return r}function a(n,r){for(var t=n.length;r>t;)n[t++]=0;return n}function l(n,r){if(r>32)throw new Error("invalid array width!");return n}function s(n,r){return function(t){var e=t.length;return[n.left(t,r,0,e),n.right(t,r,0,e)]}}function v(n,r){var t=r[0],e=r[1];return function(r){var u=r.length;return[n.left(r,t,0,u),n.left(r,e,0,u)]}}function d(n){return[0,n.length]}function h(){return null}function p(){return 0}function g(n){return n+1}function m(n){return n-1}function y(n){return function(r,t){return r+ +n(t)}}function x(n){return function(r,t){return r-n(t)}}function b(){function n(n){var r=E,t=n.length;return t&&(b=b.concat(n),q=N(q,E+=t),z.forEach(function(e){e(n,r,t)})),l}function e(){for(var n=w(E,E),r=[],t=0,e=0;E>t;++t)q[t]?n[t]=e++:r.push(t);M.forEach(function(n){n(0,[],r)}),C.forEach(function(r){r(n)});for(var u,t=0,e=0;E>t;++t)(u=q[t])&&(t!==e&&(q[e]=u,b[e]=b[t]),++e);for(b.length=e;E>e;)q[--E]=0}function i(n){function e(r,e,u){P=r.map(n),Q=Z(_(u),0,u),P=t(P,Q);var o,i=$(P),f=i[0],c=i[1];if(T)for(o=0;u>o;++o)T(P[o],o)||(q[Q[o]+e]|=W);else{for(o=0;f>o;++o)q[Q[o]+e]|=W;for(o=c;u>o;++o)q[Q[o]+e]|=W}if(!e)return K=P,L=Q,tr=f,void(er=c);var a=K,l=L,s=0,v=0;for(K=new Array(E),L=w(E,E),o=0;e>s&&u>v;++o)a[s]<P[v]?(K[o]=a[s],L[o]=l[s++]):(K[o]=P[v],L[o]=Q[v++]+e);for(;e>s;++s,++o)K[o]=a[s],L[o]=l[s];for(;u>v;++v,++o)K[o]=P[v],L[o]=Q[v]+e;i=$(K),tr=i[0],er=i[1]}function i(n,r,t){nr.forEach(function(n){n(P,Q,r,t)}),P=Q=null}function c(n){for(var r,t=0,e=0;E>t;++t)q[r=L[t]]&&(t!==e&&(K[e]=K[t]),L[e]=n[r],++e);for(K.length=e;E>e;)L[e++]=0;var u=$(K);tr=u[0],er=u[1]}function a(n){var r=n[0],t=n[1];if(T)return T=null,B(function(n,e){return e>=r&&t>e}),tr=r,er=t,V;var e,u,o,i=[],f=[];if(tr>r)for(e=r,u=Math.min(tr,t);u>e;++e)q[o=L[e]]^=W,i.push(o);else if(r>tr)for(e=tr,u=Math.min(r,er);u>e;++e)q[o=L[e]]^=W,f.push(o);if(t>er)for(e=Math.max(r,er),u=t;u>e;++e)q[o=L[e]]^=W,i.push(o);else if(er>t)for(e=Math.max(tr,t),u=er;u>e;++e)q[o=L[e]]^=W,f.push(o);return tr=r,er=t,M.forEach(function(n){n(W,i,f)}),V}function l(n){return null==n?R():Array.isArray(n)?F(n):"function"==typeof n?Y(n):U(n)}function U(n){return a(($=s(k,n))(K))}function F(n){return a(($=v(k,n))(K))}function R(){return a(($=d)(K))}function Y(n){return $=d,B(T=n),tr=0,er=E,V}function B(n){var r,t,e,u=[],o=[];for(r=0;E>r;++r)!(q[t=L[r]]&W)^(e=n(K[r],r))&&(e?(q[t]&=X,u.push(t)):(q[t]|=W,o.push(t)));M.forEach(function(n){n(W,u,o)})}function D(n){for(var r,t=[],e=er;--e>=tr&&n>0;)q[r=L[e]]||(t.push(b[r]),--n);return t}function G(n){for(var r,t=[],e=tr;er>e&&n>0;)q[r=L[e]]||(t.push(b[r]),--n),e++;return t}function H(n){function t(r,t,e,u){function o(){++P===J&&(y=S(y,I<<=1),R=S(R,I),J=A(I))}var l,s,v,d,p,g,m=F,y=w(P,J),x=D,_=H,k=P,O=0,j=0;for(V&&(x=_=h),F=new Array(P),P=0,R=k>1?N(R,E):w(E,J),k&&(v=(s=m[0]).key);u>j&&!((d=n(r[j]))>=d);)++j;for(;u>j;){for(s&&d>=v?(p=s,g=v,y[O]=P,(s=m[++O])&&(v=s.key)):(p={key:d,value:_()},g=d),F[P]=p;!(d>g||(R[l=t[j]+e]=P,q[l]&X||(p.value=x(p.value,b[l])),++j>=u));)d=n(r[j]);o()}for(;k>O;)F[y[O]=P]=m[O++],o();if(P>O)for(O=0;e>O;++O)R[O]=y[R[O]];l=M.indexOf(Q),P>1?(Q=i,T=c):(1===P?(Q=f,T=a):(Q=h,T=h),R=null),M[l]=Q}function e(){if(P>1){for(var n=P,r=F,t=w(n,n),e=0,u=0;E>e;++e)q[e]&&(t[R[u]=R[e]]=1,++u);for(F=[],P=0,e=0;n>e;++e)t[e]&&(t[e]=P++,F.push(r[e]));if(P>1)for(var e=0;u>e;++e)R[e]=t[R[e]];else R=null;M[M.indexOf(Q)]=P>1?(T=c,Q=i):1===P?(T=a,Q=f):T=Q=h}else if(1===P){for(var e=0;E>e;++e)if(q[e])return;F=[],P=0,M[M.indexOf(Q)]=Q=T=h}}function i(n,r,t){if(n!==W&&!V){var e,u,o,i;for(e=0,o=r.length;o>e;++e)q[u=r[e]]&X||(i=F[R[u]],i.value=D(i.value,b[u]));for(e=0,o=t.length;o>e;++e)(q[u=t[e]]&X)===n&&(i=F[R[u]],i.value=G(i.value,b[u]))}}function f(n,r,t){if(n!==W&&!V){var e,u,o,i=F[0];for(e=0,o=r.length;o>e;++e)q[u=r[e]]&X||(i.value=D(i.value,b[u]));for(e=0,o=t.length;o>e;++e)(q[u=t[e]]&X)===n&&(i.value=G(i.value,b[u]))}}function c(){var n,r;for(n=0;P>n;++n)F[n].value=H();for(n=0;E>n;++n)q[n]&X||(r=F[R[n]],r.value=D(r.value,b[n]))}function a(){var n,r=F[0];for(r.value=H(),n=0;E>n;++n)q[n]&X||(r.value=D(r.value,b[n]))}function l(){return V&&(T(),V=!1),F}function s(n){var r=Y(l(),0,F.length,n);return B.sort(r,0,r.length)}function v(n,r,t){return D=n,G=r,H=t,V=!0,z}function d(){return v(g,m,p)}function _(n){return v(y(n),x(n),p)}function k(n){function r(r){return n(r.value)}return Y=o(r),B=u(r),z}function O(){return k(r)}function j(){return P}function U(){var n=M.indexOf(Q);return n>=0&&M.splice(n,1),n=nr.indexOf(t),n>=0&&nr.splice(n,1),n=C.indexOf(e),n>=0&&C.splice(n,1),z}var z={top:s,all:l,reduce:v,reduceCount:d,reduceSum:_,order:k,orderNatural:O,size:j,dispose:U,remove:U};rr.push(z);var F,R,Y,B,D,G,H,I=8,J=A(I),P=0,Q=h,T=h,V=!0;return arguments.length<1&&(n=r),M.push(Q),nr.push(t),C.push(e),t(K,L,0,E),d().orderNatural()}function I(){var n=H(h),r=n.all;return delete n.all,delete n.top,delete n.order,delete n.orderNatural,delete n.size,n.value=function(){return r()[0].value},n}function J(){rr.forEach(function(n){n.dispose()});var n=z.indexOf(e);for(n>=0&&z.splice(n,1),n=z.indexOf(i),n>=0&&z.splice(n,1),n=C.indexOf(c),n>=0&&C.splice(n,1),n=0;E>n;++n)q[n]&=X;return O&=X,V}var K,L,P,Q,T,V={filter:l,filterExact:U,filterRange:F,filterFunction:Y,filterAll:R,top:D,bottom:G,group:H,groupAll:I,dispose:J,remove:J},W=~O&-~O,X=~W,Z=f(function(n){return P[n]}),$=d,nr=[],rr=[],tr=0,er=0;return z.unshift(e),z.push(i),C.push(c),O|=W,(j>=32?!W:O&(1<<j)-1)&&(q=S(q,j<<=1)),e(b,0,E),i(b,0,E),V}function c(){function n(n,r){var t;if(!d)for(t=r;E>t;++t)q[t]||(c=a(c,b[t]))}function r(n,r,t){var e,u,o;if(!d){for(e=0,o=r.length;o>e;++e)q[u=r[e]]||(c=a(c,b[u]));for(e=0,o=t.length;o>e;++e)q[u=t[e]]===n&&(c=l(c,b[u]))}}function t(){var n;for(c=s(),n=0;E>n;++n)q[n]||(c=a(c,b[n]))}function e(n,r,t){return a=n,l=r,s=t,d=!0,v}function u(){return e(g,m,p)}function o(n){return e(y(n),x(n),p)}function i(){return d&&(t(),d=!1),c}function f(){var t=M.indexOf(r);return t>=0&&M.splice(t),t=z.indexOf(n),t>=0&&z.splice(t),v}var c,a,l,s,v={reduce:e,reduceCount:u,reduceSum:o,value:i,dispose:f,remove:f},d=!0;return M.push(r),z.push(n),n(b,0,E),u()}function a(){return E}var l={add:n,remove:e,dimension:i,groupAll:c,size:a},b=[],E=0,O=0,j=8,q=U(0),M=[],z=[],C=[];return arguments.length?n(arguments[0]):l}function w(n,r){return(257>r?U:65537>r?z:C)(n)}function _(n){for(var r=w(n,n),t=-1;++t<n;)r[t]=t;return r}function A(n){return 8===n?256:16===n?65536:4294967296}b.version="1.3.7",b.permute=t;var k=b.bisect=e(r);k.by=e;var E=b.heap=u(r);E.by=u;var O=b.heapselect=o(r);O.by=o;var j=b.insertionsort=i(r);j.by=i;var q=b.quicksort=f(r);q.by=f;var M=32,U=c,z=c,C=c,N=a,S=l;"undefined"!=typeof Uint8Array&&(U=function(n){return new Uint8Array(n)},z=function(n){return new Uint16Array(n)},C=function(n){return new Uint32Array(n)},N=function(n,r){if(n.length>=r)return n;var t=new n.constructor(r);return t.set(n),t},S=function(n,r){var t;switch(r){case 16:t=z(n.length);break;case 32:t=C(n.length);break;default:throw new Error("invalid array width!")}return t.set(n),t}),n.crossfilter=b}("undefined"!=typeof t&&t||this)},{}],2:[function(n,r){r.exports=n("./crossfilter").crossfilter},{"./crossfilter":1}],3:[function(n,r){var t={add:function(n,r){return function(n,t){return r&&r(n,t),n.avg=n.count>0?n.sum/n.count:0,n}},remove:function(n,r){return function(n,t){return r&&r(n,t),n.avg=n.count>0?n.sum/n.count:0,n}},initial:function(n){return function(r){return r=n(r),r.avg=0,r}}};r.exports=t},{}],4:[function(n,r){var t={add:function(n){return n.count++,n},remove:function(n){return n.count--,n},initial:function(n){return void 0===n&&(n={}),n.count=0,n}};r.exports=t},{}],5:[function(n,r){function t(){function n(n){return r(),n.reduce(f,c,a),n}function r(){u&&(f=reductio_count.add,c=reductio_count.remove,a=reductio_count.initial),o&&(f=reductio_sum.add(o,f),c=reductio_sum.remove(o,c),a=reductio_sum.initial(a)),e&&(!u|!o?console.error("You must set .count(true) and define a .sum(accessor) to use .avg(true)."):(f=reductio_avg.add(o,f),c=reductio_avg.remove(o,c),a=reductio_avg.initial(a))),i&&(f=reductio_value_count.add(i,f),c=reductio_value_count.remove(i,c),a=reductio_value_count.initial(a))}var t,e,u,o,i,f,c,a;return e=u=o=i=!1,f=function(n){return n},f=function(n){return n},a=function(){return{}},n.order=function(r){return arguments.length?(t=r,n):t},n.count=function(r){return arguments.length?(u=r,n):u},n.sum=function(r){return arguments.length?(o=r,n):o},n.avg=function(r){return arguments.length?(e=r,n):e},n.uniques=function(r){return arguments.length?(i=r,n):i},n}reductio_count=n("./count.js"),reductio_sum=n("./sum.js"),reductio_avg=n("./avg.js"),reductio_value_count=n("./value-count.js"),r.exports=t},{"./avg.js":3,"./count.js":4,"./sum.js":6,"./value-count.js":7}],6:[function(n,r){var t={add:function(n,r){return function(t,e){return r&&r(t,e),t.sum=t.sum+n(e),t}},remove:function(n,r){return function(t,e){return r&&r(t,e),t.sum=t.sum-n(e),t}},initial:function(n){return function(r){return r=n(r),r.sum=0,r}}};r.exports=t},{}],7:[function(n,r){crossfilter=n("crossfilter");var t={add:function(n,r){var t,e;return function(u,o){return r&&r(u,o),t=u.bisect(u.values,n(o),0,u.values.length),e=u.values[t],e&&e[0]===n(o)?e[1]++:u.values.splice(t,0,[n(o),1]),u}},remove:function(n,r){return function(t,e){return r&&r(t,e),i=t.bisect(t.values,n(e),0,t.values.length),t.values[i][1]--,t}},initial:function(n){return function(r){return r=n(r),r.values=[],r.bisect=crossfilter.bisect.by(function(n){return n[0]}).left,r}}};r.exports=t},{crossfilter:2}]},{},[5])(5)});